# 回测视频数量增加至70个

## 📊 修改内容

### 1. `backend/services/backtest_analyzer.py`

**修改前**:
```python
min_videos_required = 50
```

**修改后**:
```python
min_videos_required = 70
```

### 2. `backend/app_v2.py`

**修改前**:
```python
recommended_videos = 50
timeout_seconds = 60.0 if len(request.videos) >= 50 else 30.0
```

**修改后**:
```python
recommended_videos = 70
timeout_seconds = 90.0 if len(request.videos) >= 70 else (60.0 if len(request.videos) >= 50 else 30.0)
```

## 🎯 预期效果

### 算法准确度提升

**更多训练数据**:
- 70 个视频 vs 50 个视频 = +40% 数据量
- ML 模型训练数据更充足
- 更准确的模型参数估计

**更准确的指标**:
- **MAE (平均绝对误差)**: 更稳定，更接近真实误差
- **MAPE (平均绝对百分比误差)**: 更可靠的相对误差估计
- **RMSE (均方根误差)**: 更准确的整体误差评估
- **R² (决定系数)**: 更可靠的模型拟合度
- **Correlation (相关系数)**: 更准确的预测-实际相关性

### 性能影响

**处理时间**:
- 回测时间可能增加约 40%（70 vs 50 视频）
- 超时时间已调整为 90 秒（70+ 视频）
- 60 秒（50-69 视频）
- 30 秒（<50 视频）

**资源使用**:
- ML 模型训练时间可能增加
- 内存使用可能略有增加
- 但仍在合理范围内

## 📋 验证步骤

1. **重新分析频道**
   - 确保频道有 70+ 个视频
   - 重新分析频道

2. **检查回测结果**
   - 查看"历史视频分析"部分
   - 验证回测了 70 个视频（如果可用）
   - 检查算法准确度指标

3. **对比指标**
   - 对比 50 个视频和 70 个视频的准确度指标
   - 验证指标是否更准确

## 💡 注意事项

1. **最小视频数要求**: 仍然是最少 10 个视频才能进行回测
2. **ML 模型启用**: 仍然需要 >= 20 个视频才能启用 ML 模型
3. **超时保护**: 已增加超时时间，防止长时间等待
4. **数据质量**: 更多数据不一定意味着更好的结果，但通常能提升准确性

---

**更新日期**: 2026-01-17
