# 算法准确度差异说明

## 📊 为什么算法准确度会不同？

算法准确度（MAE, MAPE, RMSE, R², Correlation）在不同环境之间出现差异是**正常现象**，原因如下：

### 1. 数据量差异

**回测逻辑**:
- 使用最近的 **50 个视频**（如果可用）
- 如果视频数 < 50，使用所有可用视频
- 如果视频数 < 10，跳过回测

**影响**:
- Localhost 和生产环境可能使用了不同数量的视频
- 不同的数据量会导致不同的准确度指标

### 2. ML 模型训练差异

**ML 模型启用条件**:
- 视频数 >= 20：启用 ML 模型
- 视频数 < 20：使用传统预测方法

**影响**:
- 如果数据量刚好在阈值附近，不同环境可能使用不同的预测方法
- ML 模型的训练结果可能因数据不同而不同

### 3. 测试集划分

**测试集比例**:
- 30-40% 的测试集（至少 10 个样本）
- 使用随机划分（可能没有固定随机种子）

**影响**:
- 不同的测试集划分会导致不同的准确度指标
- 这是机器学习中的正常现象

### 4. 数据质量差异

**可能原因**:
- 不同时间获取的视频数据可能不同
- 视频的播放量数据可能已更新
- 某些视频可能已被删除或设为私有

### 5. 随机性

**随机因素**:
- ML 模型的随机初始化
- 数据划分的随机性
- 某些算法中的随机采样

**影响**:
- 即使使用相同的数据，随机性也可能导致不同的结果

## ✅ 这是正常的吗？

**是的，这是完全正常的！**

算法准确度指标会因以下因素而变化：
- ✅ 数据量
- ✅ 数据质量
- ✅ 模型训练
- ✅ 随机性

**重要的是**:
- 准确度指标应该在合理范围内
- 不应该出现极端值（如 R² = 0 或 MAPE > 100%）
- 如果差异过大，可能是数据质量问题

## 🔍 如何验证准确度是否合理？

### 检查清单

1. **R² 分数**
   - 正常范围：0.0 - 1.0
   - 0.0 - 0.3：弱相关（可能需要改进）
   - 0.3 - 0.7：中等相关（可接受）
   - 0.7 - 1.0：强相关（优秀）

2. **MAPE（平均绝对百分比误差）**
   - 正常范围：0% - 100%+
   - < 30%：优秀
   - 30% - 50%：良好
   - 50% - 80%：可接受
   - > 80%：需要改进

3. **相关系数**
   - 正常范围：-1.0 - 1.0
   - 0.0 - 0.3：弱相关
   - 0.3 - 0.7：中等相关
   - 0.7 - 1.0：强相关

### 如果准确度差异过大

1. **检查数据量**
   ```sql
   SELECT COUNT(*) FROM "Channel" WHERE "channelId" = 'YOUR_CHANNEL_ID';
   ```

2. **检查视频数量**
   - 确保两个环境使用了相同数量的视频

3. **检查 ML 模型状态**
   - 查看后端日志，确认 ML 模型是否启用

4. **检查数据质量**
   - 确保视频数据完整
   - 确保播放量数据有效

## 💡 建议

1. **不要过度关注准确度差异**
   - 只要指标在合理范围内，差异是正常的
   - 重要的是趋势和相对表现

2. **关注实际应用效果**
   - 推荐是否准确
   - 预测是否有助于决策
   - 用户体验是否良好

3. **持续优化**
   - 收集更多数据
   - 改进模型算法
   - 优化特征工程

---

**更新日期**: 2026-01-17
