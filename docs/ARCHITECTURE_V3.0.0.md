# TrendForge Architecture v3.0.0 (MVP 3.0 - Prophet)

**ç‰ˆæœ¬**: 3.0.0  
**æ—¥æœŸ**: 2026-01-14

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„ï¼ˆMVP 3.0ï¼‰

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend (Next.js 14)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Home Page         â”‚  â”‚ Analysis Page             â”‚                  â”‚
â”‚  â”‚ /                 â”‚  â”‚ /analysis/[channelId]     â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚            â”‚                           â”‚                               â”‚
â”‚            â”‚  POST /api/analyze        â”‚ GET /api/analysis/[channelId] â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                            â”‚                           â”‚
â”‚                     Prisma DB (PostgreSQL)             â”‚
â”‚                   Channel.fingerprint.v2_analysis       â”‚
â”‚                 ChannelTrend.recommendationData         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ HTTP/REST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Backend (FastAPI)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ /api/v2/full-analysis                              â”‚  â”‚
â”‚  â”‚  - Step 1 Deep channel analysis                    â”‚  â”‚
â”‚  â”‚  - Step 2 Social trends (Twitter/Reddit/Google/Serp)|  â”‚
â”‚  â”‚  - Step 3 Recommendations + title generation        â”‚  â”‚
â”‚  â”‚  - Step 4 Backtest (>=50 videos if available)       â”‚  â”‚
â”‚  â”‚  - Step 5 Prophet predictions (7-day forecast)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ /api/v3/predict-trends                             â”‚  â”‚
â”‚  â”‚  - TrendPredictionEngine (Prophet)                 â”‚  â”‚
â”‚  â”‚  - peak_day / peak_score / confidence / intervals  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ æ•°æ®æµï¼ˆé‡ç‚¹ï¼šé¢„æµ‹æ•°æ®å¦‚ä½•è½åº“å¹¶å±•ç¤ºï¼‰

### A. æ–°åˆ†æï¼ˆç‚¹å‡»â€œåˆ†æâ€ï¼‰

1. å‰ç«¯ `POST /api/analyze`
2. Next API è·¯ç”±è¯·æ±‚åç«¯ `POST /api/v2/full-analysis`
3. åç«¯è¿”å›ï¼š
   - `trend_predictions`ï¼ˆæ•°ç»„ï¼‰
   - `emerging_trends`ï¼ˆæ•°ç»„ï¼‰
   - `recommendations[].prediction`ï¼ˆæ¯æ¡æ¨èçš„é¢„æµ‹æ‘˜è¦ï¼‰
4. å‰ç«¯å°†é¢„æµ‹å†™å…¥ DBï¼š
   - `Channel.fingerprint.v2_analysis.trend_predictions`
   - `Channel.fingerprint.v2_analysis.emerging_trends`
   - `ChannelTrend.recommendationData.prediction`
5. é¡µé¢ `GET /analysis/[channelId]` å±•ç¤ºï¼š
   - **è¶‹åŠ¿é¢„æµ‹å›¾è¡¨**ï¼š`TrendPredictionChart`ï¼ˆé»„è‰²â€œé¢„è®¡å³°å€¼â€å¡ç‰‡ï¼‰
   - **æ¨èå¡ç‰‡**ï¼šç´«è‰²é¢„æµ‹å¡ç‰‡ï¼ˆå«â€œå³°å€¼: ç¬¬Xå¤©â€ï¼‰
   - **æ–°å…´è¶‹åŠ¿**ï¼šé»„è‰²æç¤ºï¼ˆâ€œé¢„è®¡ç¬¬Xå¤©è¾¾åˆ°å³°å€¼â€ï¼‰

### B. æ—§æ•°æ®/ç¼“å­˜ï¼ˆä½ çœ‹åˆ° 55% çš„æ ¹å› ï¼‰

- åˆ†æç»“æœé¡µé¢é€šå¸¸ä» DB çš„ `fingerprint.v2_analysis` è¯»å–ã€‚
- å¦‚æœ DB ä¸­å­˜çš„æ˜¯æ—§ç®—æ³•ç”Ÿæˆçš„ä½ç½®ä¿¡åº¦é¢„æµ‹ï¼ˆå¦‚ 55%ï¼‰ï¼Œé¡µé¢ä¼šç»§ç»­æ˜¾ç¤ºæ—§å€¼ã€‚

**MVP 3.0.0 çš„ä¿®å¤ç­–ç•¥ï¼š**
- åœ¨ `GET /api/analysis/[channelId]` ä¸­ï¼Œå½“æ£€æµ‹åˆ°ï¼š
  - å·²å­˜é¢„æµ‹æœ€ä½ç½®ä¿¡åº¦ `< 75`ï¼Œæˆ–
  - ç®—æ³•ç‰ˆæœ¬ä¸åŒ¹é…ï¼ˆ`predictions_algo_version`ï¼‰
  ä¼šè‡ªåŠ¨è°ƒç”¨åç«¯ `/api/v3/predict-trends` é‡æ–°ç”Ÿæˆï¼Œå¹¶å†™å› DBã€‚

---

## ğŸ”® Prophet é¢„æµ‹ï¼ˆMVP 3.0.0 å…³é”®çº¦å®šï¼‰

- **è¾“å‡ºå­—æ®µ**ï¼š`confidence`ï¼ˆ0-100ï¼‰ã€`peak_day`ï¼ˆ1-7ï¼‰ã€`peak_score`ã€`predictions[]`ï¼ˆå«ä¸Šä¸‹ç½®ä¿¡åŒºé—´ï¼‰
- **æœ€ä½ç½®ä¿¡åº¦ç­–ç•¥**ï¼šæœåŠ¡ç«¯ç½®ä¿¡åº¦ç®—æ³•å·²è°ƒæ•´ä¸º **â‰¥75%**ï¼ˆç”¨äºäº§å“å±•ç¤ºä¸è¡ŒåŠ¨å»ºè®®ï¼‰
- **å‰ç«¯å±•ç¤º**ï¼š
  - å›¾è¡¨å¡ç‰‡å³ä¸Šè§’â€œé¢„æµ‹ç½®ä¿¡åº¦â€
  - é»„è‰²é«˜äº®â€œé¢„è®¡å³°å€¼â€
  - æ¨èå¡ç‰‡â€œå³°å€¼: ç¬¬Xå¤©â€

---

## âš ï¸ æ³¨æ„äº‹é¡¹

- `GET /api/v3/debug-runtime` ä¸ºæœ¬åœ°è°ƒè¯•ç”¨ç«¯ç‚¹ï¼Œç”¨äºéªŒè¯è¿è¡Œæ—¶åŠ è½½çš„é¢„æµ‹ä»£ç ç‰ˆæœ¬ä¸ç½®ä¿¡åº¦å‡½æ•°ï¼›å¦‚è¦ç”Ÿäº§éƒ¨ç½²å»ºè®®å…³é—­æˆ–åŠ é‰´æƒã€‚

